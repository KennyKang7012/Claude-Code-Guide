# 高級應用-Subagents多代理協作

## 文章資訊
- 文章原始標題：我的Anthropic Claude Code 學習筆記
- 文章網址：https://www.ernestchiang.com/zh/notes/ai/claude-code/

## 文章原始內容

Subagents 是 Claude Code (於 2025-07) 最創新的功能。簡單來說，你可以建立專門的「子代理 (subagent」來處理特定類型的任務，每個 Subagent 都有自己的專長和上下文 (context)。

### 什麼是 Subagents？

Subagents 本質上是可以被主代理呼叫的專門化 AI 助理。每個 Subagent 都有：

- **獨立的系統提示**：定義其角色和專長
- **專屬的上下文視窗**：避免干擾主對話 (不干擾主線任務，自己去旁邊玩沙畫圈圈，乖)
- **特定的工具權限**：只能使用完成任務所需的最小權限

### 使用場景範例

- **專案經理**：整理訪談、撰寫使用情境、撰寫 PRD。
- **程式碼審查專家**：建立一個專門審查安全漏洞的 Subagent，遵循 OWASP Top 10 標準。
- **測試專家**：建立專門編寫單元測試的 Subagent，熟悉特定框架的最佳實踐。
- **文件專家**：專門負責撰寫和維護 API 文件的 Subagent。

### 如何建立 Subagents

Claude Code 提供兩種方式建立 Subagents：

- **互動式介面**：使用 `/agents` 指令打開管理介面
- **檔案定義**：在 `.claude/agents/` 目錄下建立 Markdown 檔案

## 功能分析與使用建議

Subagents 是 Claude Code 最具創新性的功能，實現了真正的多代理協作開發模式：

**專業化分工**：每個 Subagent 可以專精於特定領域，如安全審查、測試撰寫、文檔維護等。

**上下文隔離**：避免不同任務之間的干擾，保持主對話的清晰度。

**權限最小化**：每個 Subagent 只擁有完成其特定任務所需的最小權限，提高安全性。

**可重用性**：一旦建立，Subagents 可以在多個專案中重複使用。

建議的使用策略：

1. **團隊標準化**：建立符合團隊規範的標準 Subagents，確保代碼品質一致性。

2. **專業領域覆蓋**：為不同的技術棧和業務領域建立專門的 Subagents。

3. **版本控制整合**：將 Subagent 定義文件納入版本控制，便於團隊協作。

4. **持續優化**：根據使用經驗不斷改進 Subagent 的系統提示和工具配置。

個人偏好使用檔案定義方式，因為可以更好地進行版本控制和團隊共享。